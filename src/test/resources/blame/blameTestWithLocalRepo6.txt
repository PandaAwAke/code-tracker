acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 1)   /*
f3994467c spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-03-27 20:54:19 +0000 2)    * Copyright 2002-2018 the original author or authors.
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 3)    *
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 4)    * Licensed under the Apache License, Version 2.0 (the "License");
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 5)    * you may not use this file except in compliance with the License.
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 6)    * You may obtain a copy of the License at
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 7)    *
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 8)    *      http://www.apache.org/licenses/LICENSE-2.0
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 9)    *
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 10)   * Unless required by applicable law or agreed to in writing, software
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 11)   * distributed under the License is distributed on an "AS IS" BASIS,
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 12)   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 13)   * See the License for the specific language governing permissions and
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 14)   * limitations under the License.
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 15)   */
                                                                                                                                                                                                                16)
1c45c51fe org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Juergen Hoeller   2011-12-12 23:20:03 +0000 17)  package org.springframework.web.servlet.mvc.method.annotation;
                                                                                                                                                                                                                18)
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 19)  import java.io.IOException;
31a5434ea spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-22 15:05:45 +0000 20)  import java.lang.reflect.Type;
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 21)  import java.util.ArrayList;
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 22)  import java.util.Arrays;
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 23)  import java.util.Collections;
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 24)  import java.util.HashSet;
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 25)  import java.util.List;
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 26)  import java.util.Locale;
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 27)  import java.util.Set;
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 28)  import javax.servlet.http.HttpServletRequest;
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 29)  import javax.servlet.http.HttpServletResponse;
                                                                                                                                                                                                                30)
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 31)  import org.springframework.core.GenericTypeResolver;
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 32)  import org.springframework.core.MethodParameter;
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 33)  import org.springframework.core.ParameterizedTypeReference;
e7a53e37f spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 11:02:22 +0000 34)  import org.springframework.core.ResolvableType;
e9a8a5065 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2018-04-23 16:39:05 +0000 35)  import org.springframework.core.io.InputStreamResource;
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 36)  import org.springframework.core.io.Resource;
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 37)  import org.springframework.core.io.support.ResourceRegion;
31a5434ea spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-22 15:05:45 +0000 38)  import org.springframework.http.HttpEntity;
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 39)  import org.springframework.http.HttpHeaders;
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 40)  import org.springframework.http.HttpOutputMessage;
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 41)  import org.springframework.http.HttpRange;
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 42)  import org.springframework.http.HttpStatus;
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 43)  import org.springframework.http.MediaType;
31a5434ea spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-22 15:05:45 +0000 44)  import org.springframework.http.converter.GenericHttpMessageConverter;
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 45)  import org.springframework.http.converter.HttpMessageConverter;
d83735694 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2015-07-28 10:15:48 +0000 46)  import org.springframework.http.converter.HttpMessageNotWritableException;
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 47)  import org.springframework.http.server.ServletServerHttpRequest;
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 48)  import org.springframework.http.server.ServletServerHttpResponse;
1f28825f9 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2017-05-31 19:42:23 +0000 49)  import org.springframework.lang.Nullable;
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 50)  import org.springframework.util.Assert;
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 51)  import org.springframework.util.CollectionUtils;
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 52)  import org.springframework.util.StringUtils;
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 53)  import org.springframework.web.HttpMediaTypeNotAcceptableException;
f05e2bc56 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2012-06-22 15:55:46 +0000 54)  import org.springframework.web.accept.ContentNegotiationManager;
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 55)  import org.springframework.web.accept.PathExtensionContentNegotiationStrategy;
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 56)  import org.springframework.web.context.request.NativeWebRequest;
f05e2bc56 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2012-06-22 15:55:46 +0000 57)  import org.springframework.web.context.request.ServletWebRequest;
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 58)  import org.springframework.web.method.support.HandlerMethodReturnValueHandler;
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 59)  import org.springframework.web.servlet.HandlerMapping;
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 60)  import org.springframework.web.util.UrlPathHelper;
                                                                                                                                                                                                                61)
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 62)  /**
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 63)   * Extends {@link AbstractMessageConverterMethodArgumentResolver} with the ability to handle method
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 64)   * return values by writing to the response with {@link HttpMessageConverter HttpMessageConverters}.
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 65)   *
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 66)   * @author Arjen Poutsma
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 67)   * @author Rossen Stoyanchev
818e4b077 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2018-07-10 10:11:23 +0000 68)   * @author Brian Clozel
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 69)   * @author Juergen Hoeller
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 70)   * @since 3.1
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 71)   */
3a87d8e7c org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-06-28 19:22:33 +0000 72)  public abstract class AbstractMessageConverterMethodProcessor extends AbstractMessageConverterMethodArgumentResolver
3a87d8e7c org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-06-28 19:22:33 +0000 73)  		implements HandlerMethodReturnValueHandler {
                                                                                                                                                                                                                74)
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 75)  	/* Extensions associated with the built-in message converters */
00d2606b0 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Stephane Nicoll   2016-07-05 15:00:34 +0000 76)  	private static final Set<String> WHITELISTED_EXTENSIONS = new HashSet<>(Arrays.asList(
f0464e817 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 00:31:29 +0000 77)  			"txt", "text", "yml", "properties", "csv",
f0464e817 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 00:31:29 +0000 78)  			"json", "xml", "atom", "rss",
f0464e817 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 00:31:29 +0000 79)  			"png", "jpe", "jpeg", "jpg", "gif", "wbmp", "bmp"));
                                                                                                                                                                                                                80)
00d2606b0 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Stephane Nicoll   2016-07-05 15:00:34 +0000 81)  	private static final Set<String> WHITELISTED_MEDIA_BASE_TYPES = new HashSet<>(
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 82)  			Arrays.asList("audio", "image", "video"));
                                                                                                                                                                                                                83)
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 84)  	private static final MediaType MEDIA_TYPE_APPLICATION = new MediaType("application");
                                                                                                                                                                                                                85)
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 86)  	private static final Type RESOURCE_REGION_LIST_TYPE =
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 87)  			new ParameterizedTypeReference<List<ResourceRegion>>() { }.getType();
                                                                                                                                                                                                                88)
                                                                                                                                                                                                                89)
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 90)  	private static final UrlPathHelper decodingUrlPathHelper = new UrlPathHelper();
                                                                                                                                                                                                                91)
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 92)  	private static final UrlPathHelper rawUrlPathHelper = new UrlPathHelper();
                                                                                                                                                                                                                93)
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 94)  	static {
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 95)  		rawUrlPathHelper.setRemoveSemicolonContent(false);
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 96)  		rawUrlPathHelper.setUrlDecode(false);
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 97)  	}
                                                                                                                                                                                                                98)
                                                                                                                                                                                                                99)
f05e2bc56 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2012-06-22 15:55:46 +0000 100) 	private final ContentNegotiationManager contentNegotiationManager;
                                                                                                                                                                                                                101)
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 102) 	private final PathExtensionContentNegotiationStrategy pathStrategy;
                                                                                                                                                                                                                103)
00d2606b0 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Stephane Nicoll   2016-07-05 15:00:34 +0000 104) 	private final Set<String> safeExtensions = new HashSet<>();
                                                                                                                                                                                                                105)
                                                                                                                                                                                                                106)
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 107) 	/**
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 108) 	 * Constructor with list of converters only.
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 109) 	 */
0556ed4f1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-03-30 01:42:14 +0000 110) 	protected AbstractMessageConverterMethodProcessor(List<HttpMessageConverter<?>> converters) {
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 111) 		this(converters, null, null);
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 112) 	}
                                                                                                                                                                                                                113)
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 114) 	/**
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 115) 	 * Constructor with list of converters and ContentNegotiationManager.
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 116) 	 */
0556ed4f1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-03-30 01:42:14 +0000 117) 	protected AbstractMessageConverterMethodProcessor(List<HttpMessageConverter<?>> converters,
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 118) 			@Nullable ContentNegotiationManager contentNegotiationManager) {
                                                                                                                                                                                                                119)
0556ed4f1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-03-30 01:42:14 +0000 120) 		this(converters, contentNegotiationManager, null);
f05e2bc56 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2012-06-22 15:55:46 +0000 121) 	}
                                                                                                                                                                                                                122)
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 123) 	/**
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 124) 	 * Constructor with list of converters and ContentNegotiationManager as well
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 125) 	 * as request/response body advice instances.
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 126) 	 */
0556ed4f1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-03-30 01:42:14 +0000 127) 	protected AbstractMessageConverterMethodProcessor(List<HttpMessageConverter<?>> converters,
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 128) 			@Nullable ContentNegotiationManager manager, @Nullable List<Object> requestResponseBodyAdvice) {
                                                                                                                                                                                                                129)
0556ed4f1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-03-30 01:42:14 +0000 130) 		super(converters, requestResponseBodyAdvice);
                                                                                                                                                                                                                131)
ec7d80b85 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2014-04-23 21:03:47 +0000 132) 		this.contentNegotiationManager = (manager != null ? manager : new ContentNegotiationManager());
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 133) 		this.pathStrategy = initPathStrategy(this.contentNegotiationManager);
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 134) 		this.safeExtensions.addAll(this.contentNegotiationManager.getAllFileExtensions());
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 135) 		this.safeExtensions.addAll(WHITELISTED_EXTENSIONS);
96b18c8dc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2014-05-19 19:47:16 +0000 136) 	}
                                                                                                                                                                                                                137)
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 138) 	private static PathExtensionContentNegotiationStrategy initPathStrategy(ContentNegotiationManager manager) {
f16225690 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2016-03-04 21:06:01 +0000 139) 		Class<PathExtensionContentNegotiationStrategy> clazz = PathExtensionContentNegotiationStrategy.class;
f16225690 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2016-03-04 21:06:01 +0000 140) 		PathExtensionContentNegotiationStrategy strategy = manager.getStrategy(clazz);
f16225690 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2016-03-04 21:06:01 +0000 141) 		return (strategy != null ? strategy : new PathExtensionContentNegotiationStrategy());
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 142) 	}
                                                                                                                                                                                                                143)
                                                                                                                                                                                                                144)
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 145) 	/**
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 146) 	 * Creates a new {@link HttpOutputMessage} from the given {@link NativeWebRequest}.
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 147) 	 * @param webRequest the web request to create an output message from
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 148) 	 * @return the output message
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 149) 	 */
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 150) 	protected ServletServerHttpResponse createOutputMessage(NativeWebRequest webRequest) {
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 151) 		HttpServletResponse response = webRequest.getNativeResponse(HttpServletResponse.class);
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 152) 		Assert.state(response != null, "No HttpServletResponse");
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 153) 		return new ServletServerHttpResponse(response);
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 154) 	}
                                                                                                                                                                                                                155)
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 156) 	/**
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 157) 	 * Writes the given return value to the given web request. Delegates to
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 158) 	 * {@link #writeWithMessageConverters(Object, MethodParameter, ServletServerHttpRequest, ServletServerHttpResponse)}
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 159) 	 */
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 160) 	protected <T> void writeWithMessageConverters(T value, MethodParameter returnType, NativeWebRequest webRequest)
d83735694 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2015-07-28 10:15:48 +0000 161) 			throws IOException, HttpMediaTypeNotAcceptableException, HttpMessageNotWritableException {
                                                                                                                                                                                                                162)
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 163) 		ServletServerHttpRequest inputMessage = createInputMessage(webRequest);
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 164) 		ServletServerHttpResponse outputMessage = createOutputMessage(webRequest);
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 165) 		writeWithMessageConverters(value, returnType, inputMessage, outputMessage);
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 166) 	}
                                                                                                                                                                                                                167)
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 168) 	/**
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 169) 	 * Writes the given return type to the given output message.
7756feacd spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2016-02-05 05:04:59 +0000 170) 	 * @param value the value to write to the output message
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 171) 	 * @param returnType the type of the value
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 172) 	 * @param inputMessage the input messages. Used to inspect the {@code Accept} header.
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 173) 	 * @param outputMessage the output message to write to
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 174) 	 * @throws IOException thrown in case of I/O errors
39f8bd663 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-05-05 21:19:08 +0000 175) 	 * @throws HttpMediaTypeNotAcceptableException thrown when the conditions indicated
39f8bd663 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-05-05 21:19:08 +0000 176) 	 * by the {@code Accept} header on the request cannot be met by the message converters
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 177) 	 */
7dd8dc62a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-13 09:37:58 +0000 178) 	@SuppressWarnings({"rawtypes", "unchecked"})
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 179) 	protected <T> void writeWithMessageConverters(@Nullable T value, MethodParameter returnType,
ec7d80b85 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2014-04-23 21:03:47 +0000 180) 			ServletServerHttpRequest inputMessage, ServletServerHttpResponse outputMessage)
d83735694 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2015-07-28 10:15:48 +0000 181) 			throws IOException, HttpMediaTypeNotAcceptableException, HttpMessageNotWritableException {
                                                                                                                                                                                                                182)
28a5c3009 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-18 22:33:11 +0000 183) 		Object body;
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 184) 		Class<?> valueType;
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 185) 		Type targetType;
                                                                                                                                                                                                                186)
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 187) 		if (value instanceof CharSequence) {
28a5c3009 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-18 22:33:11 +0000 188) 			body = value.toString();
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 189) 			valueType = String.class;
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 190) 			targetType = String.class;
1291d6e1b spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2016-02-05 04:55:48 +0000 191) 		}
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 192) 		else {
28a5c3009 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-18 22:33:11 +0000 193) 			body = value;
28a5c3009 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-18 22:33:11 +0000 194) 			valueType = getReturnValueType(body, returnType);
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 195) 			targetType = GenericTypeResolver.resolveType(getGenericType(returnType), returnType.getContainingClass());
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 196) 		}
                                                                                                                                                                                                                197)
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 198) 		if (isResourceType(value, returnType)) {
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 199) 			outputMessage.getHeaders().set(HttpHeaders.ACCEPT_RANGES, "bytes");
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 200) 			if (value != null && inputMessage.getHeaders().getFirst(HttpHeaders.RANGE) != null &&
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 201) 					outputMessage.getServletResponse().getStatus() == 200) {
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 202) 				Resource resource = (Resource) value;
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 203) 				try {
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 204) 					List<HttpRange> httpRanges = inputMessage.getHeaders().getRange();
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 205) 					outputMessage.getServletResponse().setStatus(HttpStatus.PARTIAL_CONTENT.value());
28a5c3009 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-18 22:33:11 +0000 206) 					body = HttpRange.toResourceRegions(httpRanges, resource);
28a5c3009 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-18 22:33:11 +0000 207) 					valueType = body.getClass();
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 208) 					targetType = RESOURCE_REGION_LIST_TYPE;
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 209) 				}
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 210) 				catch (IllegalArgumentException ex) {
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 211) 					outputMessage.getHeaders().set(HttpHeaders.CONTENT_RANGE, "bytes */" + resource.contentLength());
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 212) 					outputMessage.getServletResponse().setStatus(HttpStatus.REQUESTED_RANGE_NOT_SATISFIABLE.value());
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 213) 				}
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 214) 			}
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 215) 		}
                                                                                                                                                                                                                216)
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 217) 		MediaType selectedMediaType = null;
9a894ab61 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-11-10 20:05:03 +0000 218) 		MediaType contentType = outputMessage.getHeaders().getContentType();
fda08852b spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-12-02 05:43:43 +0000 219) 		if (contentType != null && contentType.isConcrete()) {
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 220) 			if (logger.isDebugEnabled()) {
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 221) 				logger.debug("Found 'Content-Type:" + contentType + "' in response");
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 222) 			}
0be8c20fc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-07-25 00:47:26 +0000 223) 			selectedMediaType = contentType;
fda08852b spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-12-02 05:43:43 +0000 224) 		}
fda08852b spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-12-02 05:43:43 +0000 225) 		else {
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 226) 			HttpServletRequest request = inputMessage.getServletRequest();
0be8c20fc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-07-25 00:47:26 +0000 227) 			List<MediaType> acceptableTypes = getAcceptableMediaTypes(request);
0be8c20fc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-07-25 00:47:26 +0000 228) 			List<MediaType> producibleTypes = getProducibleMediaTypes(request, valueType, targetType);
                                                                                                                                                                                                                229)
0be8c20fc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-07-25 00:47:26 +0000 230) 			if (body != null && producibleTypes.isEmpty()) {
fda08852b spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-12-02 05:43:43 +0000 231) 				throw new HttpMessageNotWritableException(
fda08852b spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-12-02 05:43:43 +0000 232) 						"No converter found for return value of type: " + valueType);
667fc7e4a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2015-09-04 12:38:47 +0000 233) 			}
0be8c20fc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-07-25 00:47:26 +0000 234) 			List<MediaType> mediaTypesToUse = new ArrayList<>();
0be8c20fc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-07-25 00:47:26 +0000 235) 			for (MediaType requestedType : acceptableTypes) {
0be8c20fc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-07-25 00:47:26 +0000 236) 				for (MediaType producibleType : producibleTypes) {
ec7d80b85 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2014-04-23 21:03:47 +0000 237) 					if (requestedType.isCompatibleWith(producibleType)) {
fda08852b spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-12-02 05:43:43 +0000 238) 						mediaTypesToUse.add(getMostSpecificMediaType(requestedType, producibleType));
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 239) 					}
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 240) 				}
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 241) 			}
fda08852b spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-12-02 05:43:43 +0000 242) 			if (mediaTypesToUse.isEmpty()) {
28a5c3009 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-18 22:33:11 +0000 243) 				if (body != null) {
0be8c20fc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-07-25 00:47:26 +0000 244) 					throw new HttpMediaTypeNotAcceptableException(producibleTypes);
c5e360d88 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2014-10-17 17:21:08 +0000 245) 				}
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 246) 				if (logger.isDebugEnabled()) {
0be8c20fc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-07-25 00:47:26 +0000 247) 					logger.debug("No match for " + acceptableTypes + ", supported: " + producibleTypes);
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 248) 				}
c5e360d88 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2014-10-17 17:21:08 +0000 249) 				return;
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 250) 			}
                                                                                                                                                                                                                251)
fda08852b spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-12-02 05:43:43 +0000 252) 			MediaType.sortBySpecificityAndQuality(mediaTypesToUse);
                                                                                                                                                                                                                253)
fda08852b spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-12-02 05:43:43 +0000 254) 			for (MediaType mediaType : mediaTypesToUse) {
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 255) 				if (mediaType.isConcrete()) {
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 256) 					selectedMediaType = mediaType;
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 257) 					break;
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 258) 				}
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 259) 				else if (mediaType.equals(MediaType.ALL) || mediaType.equals(MEDIA_TYPE_APPLICATION)) {
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 260) 					selectedMediaType = MediaType.APPLICATION_OCTET_STREAM;
1bbdb0d2f org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 12:22:21 +0000 261) 					break;
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 262) 				}
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 263) 			}
                                                                                                                                                                                                                264)
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 265) 			if (logger.isDebugEnabled()) {
0be8c20fc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-07-25 00:47:26 +0000 266) 				logger.debug("Using '" + selectedMediaType + "', given " +
0be8c20fc spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-07-25 00:47:26 +0000 267) 						acceptableTypes + " and supported " + producibleTypes);
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 268) 			}
fda08852b spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-12-02 05:43:43 +0000 269) 		}
                                                                                                                                                                                                                270)
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 271) 		if (selectedMediaType != null) {
982cb2f25 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2012-05-11 18:43:58 +0000 272) 			selectedMediaType = selectedMediaType.removeQualityValue();
7dd8dc62a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-13 09:37:58 +0000 273) 			for (HttpMessageConverter<?> converter : this.messageConverters) {
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 274) 				GenericHttpMessageConverter genericConverter = (converter instanceof GenericHttpMessageConverter ?
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 275) 						(GenericHttpMessageConverter<?>) converter : null);
7dd8dc62a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-13 09:37:58 +0000 276) 				if (genericConverter != null ?
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 277) 						((GenericHttpMessageConverter) converter).canWrite(targetType, valueType, selectedMediaType) :
7dd8dc62a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-13 09:37:58 +0000 278) 						converter.canWrite(valueType, selectedMediaType)) {
28a5c3009 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-18 22:33:11 +0000 279) 					body = getAdvice().beforeBodyWrite(body, returnType, selectedMediaType,
7dd8dc62a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-13 09:37:58 +0000 280) 							(Class<? extends HttpMessageConverter<?>>) converter.getClass(),
0556ed4f1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-03-30 01:42:14 +0000 281) 							inputMessage, outputMessage);
28a5c3009 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-18 22:33:11 +0000 282) 					if (body != null) {
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 283) 						if (logger.isDebugEnabled()) {
29ce6685c spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-08-01 21:49:28 +0000 284) 							logger.debug("Writing [" + formatValue(body) + "]");
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 285) 						}
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 286) 						addContentDispositionHeader(inputMessage, outputMessage);
7dd8dc62a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-13 09:37:58 +0000 287) 						if (genericConverter != null) {
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 288) 							genericConverter.write(body, targetType, selectedMediaType, outputMessage);
7dd8dc62a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-13 09:37:58 +0000 289) 						}
7dd8dc62a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-13 09:37:58 +0000 290) 						else {
28a5c3009 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-18 22:33:11 +0000 291) 							((HttpMessageConverter) converter).write(body, selectedMediaType, outputMessage);
7dd8dc62a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-13 09:37:58 +0000 292) 						}
a9b2a1249 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2014-09-19 18:57:56 +0000 293) 					}
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 294) 					else {
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 295) 						if (logger.isDebugEnabled()) {
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 296) 							logger.debug("Nothing to write: null body");
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 297) 						}
900bc8a2e spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-23 02:44:24 +0000 298) 					}
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 299) 					return;
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 300) 				}
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 301) 			}
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 302) 		}
                                                                                                                                                                                                                303)
28a5c3009 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-06-18 22:33:11 +0000 304) 		if (body != null) {
ec7d80b85 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2014-04-23 21:03:47 +0000 305) 			throw new HttpMediaTypeNotAcceptableException(this.allSupportedMediaTypes);
c5e360d88 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2014-10-17 17:21:08 +0000 306) 		}
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 307) 	}
                                                                                                                                                                                                                308)
a9b2a1249 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2014-09-19 18:57:56 +0000 309) 	/**
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 310) 	 * Return the type of the value to be written to the response. Typically this is
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 311) 	 * a simple check via getClass on the value but if the value is null, then the
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 312) 	 * return type needs to be examined possibly including generic type determination
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 313) 	 * (e.g. {@code ResponseEntity<T>}).
a9b2a1249 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2014-09-19 18:57:56 +0000 314) 	 */
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 315) 	protected Class<?> getReturnValueType(@Nullable Object value, MethodParameter returnType) {
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 316) 		return (value != null ? value.getClass() : returnType.getParameterType());
a9b2a1249 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2014-09-19 18:57:56 +0000 317) 	}
                                                                                                                                                                                                                318)
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 319) 	/**
818e4b077 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2018-07-10 10:11:23 +0000 320) 	 * Return whether the returned value or the declared return type extends {@link Resource}.
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 321) 	 */
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 322) 	protected boolean isResourceType(@Nullable Object value, MethodParameter returnType) {
e9a8a5065 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2018-04-23 16:39:05 +0000 323) 		Class<?> clazz = getReturnValueType(value, returnType);
e9a8a5065 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2018-04-23 16:39:05 +0000 324) 		return clazz != InputStreamResource.class && Resource.class.isAssignableFrom(clazz);
582014e94 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Brian Clozel      2017-08-24 18:50:37 +0000 325) 	}
                                                                                                                                                                                                                326)
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 327) 	/**
e7a53e37f spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 11:02:22 +0000 328) 	 * Return the generic type of the {@code returnType} (or of the nested type
e7a53e37f spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 11:02:22 +0000 329) 	 * if it is an {@link HttpEntity}).
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 330) 	 */
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 331) 	private Type getGenericType(MethodParameter returnType) {
31a5434ea spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-22 15:05:45 +0000 332) 		if (HttpEntity.class.isAssignableFrom(returnType.getParameterType())) {
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 333) 			return ResolvableType.forType(returnType.getGenericParameterType()).getGeneric().getType();
31a5434ea spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-22 15:05:45 +0000 334) 		}
31a5434ea spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-22 15:05:45 +0000 335) 		else {
e7a53e37f spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 11:02:22 +0000 336) 			return returnType.getGenericParameterType();
31a5434ea spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-22 15:05:45 +0000 337) 		}
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 338) 	}
                                                                                                                                                                                                                339)
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 340) 	/**
e0480f75a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Phillip Webb      2018-06-28 08:28:44 +0000 341) 	 * Returns the media types that can be produced.
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 342) 	 * @see #getProducibleMediaTypes(HttpServletRequest, Class, Type)
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 343) 	 */
aba882af4 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sam Brannen       2018-04-04 12:04:54 +0000 344) 	@SuppressWarnings("unused")
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 345) 	protected List<MediaType> getProducibleMediaTypes(HttpServletRequest request, Class<?> valueClass) {
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 346) 		return getProducibleMediaTypes(request, valueClass, null);
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 347) 	}
                                                                                                                                                                                                                348)
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 349) 	/**
e0480f75a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Phillip Webb      2018-06-28 08:28:44 +0000 350) 	 * Returns the media types that can be produced. The resulting media types are:
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 351) 	 * <ul>
ec7d80b85 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2014-04-23 21:03:47 +0000 352) 	 * <li>The producible media types specified in the request mappings, or
ec7d80b85 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2014-04-23 21:03:47 +0000 353) 	 * <li>Media types of configured converters that can write the specific return value, or
ec7d80b85 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2014-04-23 21:03:47 +0000 354) 	 * <li>{@link MediaType#ALL}
1eaca6572 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-18 11:34:47 +0000 355) 	 * </ul>
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 356) 	 * @since 4.2
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 357) 	 */
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 358) 	@SuppressWarnings("unchecked")
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 359) 	protected List<MediaType> getProducibleMediaTypes(
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 360) 			HttpServletRequest request, Class<?> valueClass, @Nullable Type targetType) {
                                                                                                                                                                                                                361)
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 362) 		Set<MediaType> mediaTypes =
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 363) 				(Set<MediaType>) request.getAttribute(HandlerMapping.PRODUCIBLE_MEDIA_TYPES_ATTRIBUTE);
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 364) 		if (!CollectionUtils.isEmpty(mediaTypes)) {
00d2606b0 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Stephane Nicoll   2016-07-05 15:00:34 +0000 365) 			return new ArrayList<>(mediaTypes);
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 366) 		}
ec7d80b85 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2014-04-23 21:03:47 +0000 367) 		else if (!this.allSupportedMediaTypes.isEmpty()) {
00d2606b0 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Stephane Nicoll   2016-07-05 15:00:34 +0000 368) 			List<MediaType> result = new ArrayList<>();
ec7d80b85 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2014-04-23 21:03:47 +0000 369) 			for (HttpMessageConverter<?> converter : this.messageConverters) {
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 370) 				if (converter instanceof GenericHttpMessageConverter && targetType != null) {
b915e42c3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2018-07-16 17:45:35 +0000 371) 					if (((GenericHttpMessageConverter<?>) converter).canWrite(targetType, valueClass, null)) {
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 372) 						result.addAll(converter.getSupportedMediaTypes());
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 373) 					}
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 374) 				}
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 375) 				else if (converter.canWrite(valueClass, null)) {
c5833b192 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-24 17:22:22 +0000 376) 					result.addAll(converter.getSupportedMediaTypes());
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 377) 				}
c5833b192 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-24 17:22:22 +0000 378) 			}
c5833b192 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-24 17:22:22 +0000 379) 			return result;
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 380) 		}
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 381) 		else {
5fa7f2479 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-20 17:02:20 +0000 382) 			return Collections.singletonList(MediaType.ALL);
af1dfd357 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-17 13:02:48 +0000 383) 		}
289f35da3 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Sebastien Deleuze 2015-06-25 13:02:33 +0000 384) 	}
                                                                                                                                                                                                                385)
1cc5afe24 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-10-20 20:42:26 +0000 386) 	private List<MediaType> getAcceptableMediaTypes(HttpServletRequest request)
1cc5afe24 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2017-10-20 20:42:26 +0000 387) 			throws HttpMediaTypeNotAcceptableException {
                                                                                                                                                                                                                388)
f3994467c spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-03-27 20:54:19 +0000 389) 		return this.contentNegotiationManager.resolveMediaTypes(new ServletWebRequest(request));
f05e2bc56 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2012-06-22 15:55:46 +0000 390) 	}
                                                                                                                                                                                                                391)
5fa7f2479 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-20 17:02:20 +0000 392) 	/**
982cb2f25 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2012-05-11 18:43:58 +0000 393) 	 * Return the more specific of the acceptable and the producible media types
982cb2f25 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2012-05-11 18:43:58 +0000 394) 	 * with the q-value of the former.
5fa7f2479 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-05-20 17:02:20 +0000 395) 	 */
982cb2f25 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2012-05-11 18:43:58 +0000 396) 	private MediaType getMostSpecificMediaType(MediaType acceptType, MediaType produceType) {
ec7d80b85 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2014-04-23 21:03:47 +0000 397) 		MediaType produceTypeToUse = produceType.copyQualityValue(acceptType);
ec7d80b85 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2014-04-23 21:03:47 +0000 398) 		return (MediaType.SPECIFICITY_COMPARATOR.compare(acceptType, produceTypeToUse) <= 0 ? acceptType : produceTypeToUse);
ad2e0d458 org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Arjen Poutsma     2011-05-17 09:45:57 +0000 399) 	}
                                                                                                                                                                                                                400)
29ce6685c spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-08-01 21:49:28 +0000 401) 	static String formatValue(Object body) {
29ce6685c spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-08-01 21:49:28 +0000 402) 		return (body instanceof CharSequence ? "\"" + body + "\"" : body.toString());
29ce6685c spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2018-08-01 21:49:28 +0000 403) 	}
                                                                                                                                                                                                                404)
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 405) 	/**
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 406) 	 * Check if the path has a file extension and whether the extension is
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 407) 	 * either {@link #WHITELISTED_EXTENSIONS whitelisted} or explicitly
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 408) 	 * {@link ContentNegotiationManager#getAllFileExtensions() registered}.
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 409) 	 * If not, and the status is in the 2xx range, a 'Content-Disposition'
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 410) 	 * header with a safe attachment file name ("f.txt") is added to prevent
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 411) 	 * RFD exploits.
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 412) 	 */
5169c51a6 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-12-13 12:02:23 +0000 413) 	private void addContentDispositionHeader(ServletServerHttpRequest request, ServletServerHttpResponse response) {
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 414) 		HttpHeaders headers = response.getHeaders();
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 415) 		if (headers.containsKey(HttpHeaders.CONTENT_DISPOSITION)) {
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 416) 			return;
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 417) 		}
                                                                                                                                                                                                                418)
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 419) 		try {
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 420) 			int status = response.getServletResponse().getStatus();
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 421) 			if (status < 200 || status > 299) {
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 422) 				return;
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 423) 			}
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 424) 		}
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 425) 		catch (Throwable ex) {
5169c51a6 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-12-13 12:02:23 +0000 426) 			// ignore
050e79e45 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-26 20:01:32 +0000 427) 		}
                                                                                                                                                                                                                428)
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 429) 		HttpServletRequest servletRequest = request.getServletRequest();
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 430) 		String requestUri = rawUrlPathHelper.getOriginatingRequestUri(servletRequest);
                                                                                                                                                                                                                431)
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 432) 		int index = requestUri.lastIndexOf('/') + 1;
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 433) 		String filename = requestUri.substring(index);
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 434) 		String pathParams = "";
                                                                                                                                                                                                                435)
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 436) 		index = filename.indexOf(';');
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 437) 		if (index != -1) {
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 438) 			pathParams = filename.substring(index);
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 439) 			filename = filename.substring(0, index);
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 440) 		}
                                                                                                                                                                                                                441)
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 442) 		filename = decodingUrlPathHelper.decodeRequestString(servletRequest, filename);
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 443) 		String ext = StringUtils.getFilenameExtension(filename);
                                                                                                                                                                                                                444)
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 445) 		pathParams = decodingUrlPathHelper.decodeRequestString(servletRequest, pathParams);
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 446) 		String extInPathParams = StringUtils.getFilenameExtension(pathParams);
                                                                                                                                                                                                                447)
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 448) 		if (!safeExtension(servletRequest, ext) || !safeExtension(servletRequest, extInPathParams)) {
3a919a48d spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-11 22:14:29 +0000 449) 			headers.add(HttpHeaders.CONTENT_DISPOSITION, "inline;filename=f.txt");
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 450) 		}
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 451) 	}
                                                                                                                                                                                                                452)
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 453) 	@SuppressWarnings("unchecked")
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 454) 	private boolean safeExtension(HttpServletRequest request, @Nullable String extension) {
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 455) 		if (!StringUtils.hasText(extension)) {
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 456) 			return true;
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 457) 		}
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 458) 		extension = extension.toLowerCase(Locale.ENGLISH);
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 459) 		if (this.safeExtensions.contains(extension)) {
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 460) 			return true;
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 461) 		}
237439ef9 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 17:37:13 +0000 462) 		String pattern = (String) request.getAttribute(HandlerMapping.BEST_MATCHING_PATTERN_ATTRIBUTE);
237439ef9 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 17:37:13 +0000 463) 		if (pattern != null && pattern.endsWith("." + extension)) {
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 464) 			return true;
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 465) 		}
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 466) 		if (extension.equals("html")) {
237439ef9 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 17:37:13 +0000 467) 			String name = HandlerMapping.PRODUCIBLE_MEDIA_TYPES_ATTRIBUTE;
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 468) 			Set<MediaType> mediaTypes = (Set<MediaType>) request.getAttribute(name);
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 469) 			if (!CollectionUtils.isEmpty(mediaTypes) && mediaTypes.contains(MediaType.TEXT_HTML)) {
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 470) 				return true;
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 471) 			}
bdb71e91a spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-02 18:07:48 +0000 472) 		}
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 473) 		return safeMediaTypesForExtension(new ServletWebRequest(request), extension);
2bd1daa75 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-10-15 08:33:27 +0000 474) 	}
                                                                                                                                                                                                                475)
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 476) 	private boolean safeMediaTypesForExtension(NativeWebRequest request, String extension) {
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 477) 		List<MediaType> mediaTypes = null;
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 478) 		try {
f813712f5 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2017-06-07 12:19:15 +0000 479) 			mediaTypes = this.pathStrategy.resolveMediaTypeKey(request, extension);
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 480) 		}
b204437ce spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Juergen Hoeller   2016-07-02 12:48:15 +0000 481) 		catch (HttpMediaTypeNotAcceptableException ex) {
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 482) 			// Ignore
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 483) 		}
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 484) 		if (CollectionUtils.isEmpty(mediaTypes)) {
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 485) 			return false;
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 486) 		}
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 487) 		for (MediaType mediaType : mediaTypes) {
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 488) 			if (!safeMediaType(mediaType)) {
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 489) 				return false;
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 490) 			}
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 491) 		}
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 492) 		return true;
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 493) 	}
                                                                                                                                                                                                                494)
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 495) 	private boolean safeMediaType(MediaType mediaType) {
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 496) 		return (WHITELISTED_MEDIA_BASE_TYPES.contains(mediaType.getType()) ||
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 497) 				mediaType.getSubtype().endsWith("+xml"));
a3168fde1 spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.java                           (Rossen Stoyanchev 2015-11-06 21:45:41 +0000 498) 	}
                                                                                                                                                                                                                499)
acc75aa4b org.springframework.web.servlet/src/main/java/org/springframework/web/servlet/mvc/method/annotation/support/AbstractMessageConverterMethodProcessor.java (Rossen Stoyanchev 2011-04-06 11:30:59 +0000 500) }
